<!DOCTYPE html>
<html>
    <head>
        <title>My experiment</title>
        <script src="{{ url_for('static', filename='js/jspsych.js') }}"></script>
        <script src="{{ url_for('static', filename='js/plugins/jspsych-preload.js') }}"></script>
        <script src="{{ url_for('static', filename='js/plugins/jspsych-image-keyboard-response.js') }}"></script>
        <script src="{{ url_for('static', filename='js/plugins/jspsych-html-keyboard-response.js') }}"></script>
        <script src="{{ url_for('static', filename='js/plugins/jspsych-html-button-response.js') }}"></script>
        <script src="{{ url_for('static', filename='js/plugins/jspsych-webgazer-init-camera.js') }}"></script>
        <script src="{{ url_for('static', filename='js/plugins/jspsych-webgazer-calibrate.js') }}"></script>
        <script src="{{ url_for('static', filename='js/plugins/jspsych-webgazer-validate.js') }}"></script>
        <script src="{{ url_for('static', filename='webgazer.js') }}"></script>
        <script src="{{ url_for('static', filename='js/extensions/jspsych-ext-webgazer.js') }}"></script>
        <link href="{{ url_for('static', filename='js/css/jspsych.css') }}" rel="stylesheet" type="text/css">
    </head>
    <body></body>
    <script>

    var init_camera_trial = {
        type: 'webgazer-init-camera'
    }

    var calibration_trial = {
        type: 'webgazer-calibrate',
        calibration_points: [[25,50], [50,50], [75,50], [50,25], [50,75]],
        repititions_per_point: 3,
        randomize_calibration_order: true,
        calibration_mode: 'click'
    }

    var validation_trial = {
        type: 'webgazer-validate',
        validation_points: [[-200,200], [200,200],[-200,-200],[200,-200]],
        validation_point_coordinates: 'center-offset-pixels',
        roi_radius: 100
    }

    var trial = {
        type: 'html-button-response',
        stimulus: '<img src="{{ url_for("static", filename="img/redblue.png") }}"></img>',
        prompt: "<p>look at one of the colored squares, then indicate which square you were looking at</p>",
        choices: ['red','blue'],
        trial_duration: 3000,
        extensions: [
            {
            type: 'webgazer', 
            params: {targets: ['#jspsych-image-keyboard-response-stimulus']}
            }
        ]
    }

    jsPsych.init({
        timeline: [init_camera_trial, calibration_trial, validation_trial, trial],
        extensions: [ {type: 'webgazer'} ]
    })

    </script>
</html>